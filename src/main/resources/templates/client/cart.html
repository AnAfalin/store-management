<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <th:block th:insert="~{part/header :: head}"/>

    <title>Programmer Store</title>

</head>
<body>

<th:block th:insert="~{part/navigation :: nav}"/>

<div class="container mt-5">
    <h4>Список всех пользователей</h4>

    <table class="table">
        <tr>
            <th>Наименование</th>
            <th>Цена</th>
            <th>Количество</th>
            <th>Сумма</th>
        </tr>
        <tr th:each="cartRow : ${cartRows}">
            <td th:text="${cartRow.product.name}">Name</td>
            <td th:text="${cartRow.product.price}">Price</td>
            <td th:text="${cartRow.count}">Count</td>
            <td th:text="${cartRow.amount}">Amount</td>
        </tr>
    </table>

    <div>Общая сумма корзины: <span th:text="${cart.amount}">amount cart</span></div>

    <div sec:authorize="!hasRole('ROLE_ADMIN')" class="mt-3">
        <form class="mx-auto"
              th:action="@{/clients/{clientId}/order/create-order(clientId=${clientId})}"
              th:method="get">
            <button th:class="${cart.amount} == 0 ? 'btn btn-sm btn-secondary disabled' : 'btn btn-sm btn-secondary'">
                Оформить
            </button>
        </form>
    </div>
</div>

<th:block th:insert="~{part/footer :: footer}"/>
</body>
</html>